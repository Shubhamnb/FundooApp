package com.bridge.LinkedListComDataPro;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;

import org.json.simple.JSONArray;
import org.json.simple.JSONObject;
import org.json.simple.parser.JSONParser;
import org.json.simple.parser.ParseException;

import com.bridge.commercialdataprosessing.CommercialCompanyProj;
import com.bridge.commercialdataprosessing.CommercialUserProj;

import Utility.LinkedList;

public class ReadJson {
	
	private String comPath = "companyStock.json";
	private String userPath = "userStock.json";
	JSONParser parser = new JSONParser();
	JSONObject jsonObj;
	JSONArray  jsonArray, array;
	JSONObject simple;
	JSONObject obj;
	
	public void addToLinkedList() throws FileNotFoundException, IOException, ParseException {

		LinkedList list = new LinkedList();
		File file1 = new File(comPath);
		parser = new JSONParser();
		jsonObj = (JSONObject) parser.parse(new FileReader(file1));
		array = (JSONArray) jsonObj.get("StockDetails");

		
		CommercialUserProj userShare;

		
		
		//Convert JSON Array into List
		list = covertJsonArrayToList(array);
		
				list.show();

		LinkedList list1 = new LinkedList();
		File file2 = new File(userPath);
		parser = new JSONParser();
		jsonObj = (JSONObject) parser.parse(new FileReader(file2));
		array = (JSONArray) jsonObj.get("UserDetails");

		System.out.println("User Share :");
		for (int i = 0; i < array.size(); i++) {
			obj = (JSONObject) array.get(i);

			userShare = new CommercialUserProj();
			String sharePrice = obj.get("SharePrice").toString();
			userShare.setPrice(sharePrice);

			String noOfShare = obj.get("NoOfShare").toString();
			userShare.setNoOfShares(noOfShare);

			String userName = obj.get("UserName").toString();
			userShare.setUserName(userName);

			list1.add(userShare);
		}
		list1.show();
	}

	private LinkedList covertJsonArrayToList(JSONArray array) {
		CommercialCompanyProj companyShare;
		LinkedList list = new LinkedList();
		
		System.out.println("Company Share :");
		for (int i = 0; i < array.size(); i++) {
			obj = (JSONObject) array.get(i);

			companyShare = new CommercialCompanyProj();
			String sharePrice = obj.get("SharePrice").toString();
			companyShare.setSharePrice(sharePrice);

			String noOfShare = obj.get("NoOfShare").toString();
			companyShare.setNoOFShare(noOfShare);

			String stockName = obj.get("StockName").toString();
			companyShare.setStockName(stockName);

			String stockSymbol = obj.get("StockSymbol").toString();
			companyShare.setStockSymbol(stockSymbol);

			list.add(companyShare);
		}

		return list;
	}
}
